'use strict';function fileUploader(id,op){var el=document.getElementById(id);var mainDiv=document.createElement('div');mainDiv.setAttribute('class','esay-uploader-main');el.appendChild(mainDiv);var input=document.createElement('input');input.setAttribute('type','file');input.setAttribute('class','esay-uploader-input');input.setAttribute('id','esay-uploader');mainDiv.appendChild(input);input.addEventListener("change",function(e){var file=e.target.files[0];//创建formdata对象
var formdata=new FormData();formdata.append("file",file);var xhr=new XMLHttpRequest();xhr.open("post",op.action);//回调
xhr.onreadystatechange=function(e){if(xhr.readyState==4&&xhr.status==200){op.success(xhr);}};//将formdata上传
xhr.send(formdata);});var button=document.createElement('div');button.setAttribute('class','esay-uploader-button');button.innerHTML=op.buttonText||'上传文件';mainDiv.appendChild(button);// this.success = () => op.success(xhr);
}
